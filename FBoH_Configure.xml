<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/..\FrameXML\UI.xsd">
	<Script file="FBoH_Configure.lua">
	</Script>

	<Frame name="FBoH_HorizontalInsertTemplate" virtual="true" hidden="false">
		<Size>
			<AbsDimension x="0" y="8"/>
		</Size>
		<Layers>
			<Layer level="ARTWORK">
				<Texture name="$parent_Left" file="Interface\Addons\FBagOfHolding\Images\Horizontal-Insert">
					<Size>
						<AbsDimension x="28" y="8"/>
					</Size>
					<TexCoords top="0" left="0" bottom="0.25" right="0.109375"/>
					<Anchors>
						<Anchor point="TOPLEFT"/>
					</Anchors>
				</Texture>
				<Texture name="$parent_Right" file="Interface\Addons\FBagOfHolding\Images\Horizontal-Insert">
					<Size>
						<AbsDimension x="28" y="8"/>
					</Size>
					<TexCoords top="0.25" left="0" bottom="0.5" right="0.109375"/>
					<Anchors>
						<Anchor point="TOPRIGHT"/>
					</Anchors>
				</Texture>
				<Texture file="Interface\Addons\FBagOfHolding\Images\Horizontal-Insert">
					<Size>
						<AbsDimension x="0" y="8"/>
					</Size>
					<TexCoords top="0" left="0.109375" bottom="0.25" right="1"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parent_Left" relativePoint="RIGHT"/>
						<Anchor point="RIGHT" relativeTo="$parent_Right" relativePoint="LEFT"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
	</Frame>
	
	<Frame name="FBoH_InsertGroupTemplate" virtual="true" hidden="false">
		<Size>
			<AbsDimension x="100" y="32"/>
		</Size>
		<Layers>
			<Layer level="ARTWORK">
				<Texture file="Interface\Addons\FBagOfHolding\Images\GroupBars">
					<Size>
						<AbsDimension x="8" y="8"/>
					</Size>
					<TexCoords top="0" left="0" bottom="0.25" right="1"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativePoint="LEFT">
							<Offset>
								<AbsDimension x="4" y="0"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture file="Interface\Addons\FBagOfHolding\Images\GroupBars">
					<Size>
						<AbsDimension x="8" y="8"/>
					</Size>
					<TexCoords top="0.25" left="0" bottom="0.5" right="1"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="LEFT">
							<Offset>
								<AbsDimension x="4" y="0"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture name="$parent_GroupTop" file="Interface\Buttons\UI-ListBox-Highlight2">
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="16" y="-6"/>
							</Offset>
						</Anchor>
						<Anchor point="BOTTOMRIGHT" relativePoint="RIGHT">
							<Offset>
								<AbsDimension x="-4" y="1"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture name="$parent_GroupBottom" file="Interface\Buttons\UI-ListBox-Highlight2">
					<Anchors>
						<Anchor point="BOTTOMLEFT">
							<Offset>
								<AbsDimension x="16" y="6"/>
							</Offset>
						</Anchor>
						<Anchor point="TOPRIGHT" relativePoint="RIGHT">
							<Offset>
								<AbsDimension x="-4" y="-1"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad>
				self.groupTop = _G[self:GetName() .. "_GroupTop"];
				self.groupBottom = _G[self:GetName() .. "_GroupBottom"];
				
				self.SetInsertTop = function(btn, top)
					local active, inactive = nil, nil;
					if top then
						active = self.groupTop;
						inactive = self.groupBottom;
					else
						active = self.groupBottom;
						inactive = self.groupTop;
					end
					active:SetVertexColor(1, 1, 1, 0.9);
					inactive:SetVertexColor(0.3, 0.3, 0.3, 0.8);
				end
				
				self:SetInsertTop(true);
			</OnLoad>
		</Scripts>
	</Frame>
	
	<Button name="FBoH_PropertyButton" virtual="true" hidden="false">
		<Size>
			<AbsDimension x="150" y="32"/>
		</Size>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parent_Background" file="Interface\Buttons\UI-ListBox-Highlight2">
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="0" y="-4"/>
							</Offset>
						</Anchor>
						<Anchor point="BOTTOMRIGHT">
							<Offset>
								<AbsDimension x="0" y="4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString name="$parent_Text" inherits="GameFontNormal" text="Property Button">
					<Anchors>
						<Anchor point="CENTER"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad>
				self.type = "property";
				
				self.fontString = _G[self:GetName() .. "_Text"];
				self.SetProperty = function(btn, label, property)
					label = label or "";
					self.property = property;
					btn.fontString:SetText(label);
				end
				self.SetText = function(btn, label)
					label = label or "";
					self.property = nil;
					btn.fontString:SetText(label);
				end
				
				tex = _G[self:GetName() .. "_Background"];
				tex:SetVertexColor(0.5, 0.8, 1.0, 0.6);

				self:SetProperty();
				self:RegisterForDrag("LeftButton");
			</OnLoad>
			<OnDragStart>
				FBoH_ConfigureDrag:SetText(self.fontString:GetText());
				FBoH_ConfigureDrag:Show();
				FBoH_Configure.dragData = {
					source=self;
				}
			</OnDragStart>
			<OnDragStop>
				FBoH_ConfigureDrag:Hide();
				FBoH_Configure:ExecuteDrag();
				FBoH_Configure.dragData = nil;
			</OnDragStop>
		</Scripts>
	</Button>
	
	<Button name="FBoH_ConfigureDrag" inherits="FBoH_PropertyButton" frameStrata="TOOLTIP" hidden="true" parent="UIParent">
		<Anchors>
			<Anchor point="TOPLEFT"/>
		</Anchors>
		<Scripts>
			<OnUpdate>
				local x, y = GetCursorPosition();
				x = x / UIParent:GetEffectiveScale();
				y = y / UIParent:GetEffectiveScale();
				self:SetPoint("TOPLEFT", UIParent, "BOTTOMLEFT", x, y);
			</OnUpdate>
		</Scripts>
	</Button>
	
	<Button name="FBoH_FilterButton" virtual="true" hidden="false">
		<Size>
			<AbsDimension x="150" y="32"/>
		</Size>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parent_Background" file="Interface\Buttons\UI-ListBox-Highlight2">
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="0" y="-4"/>
							</Offset>
						</Anchor>
						<Anchor point="BOTTOMRIGHT">
							<Offset>
								<AbsDimension x="0" y="4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString name="$parent_Text" inherits="GameFontNormal" justifyH="LEFT" text="Filter Button">
					<Size>
						<AbsDimension x="0" y="24"/>
					</Size>
					<Anchors>
						<Anchor point="LEFT">
							<Offset>
								<AbsDimension x="8" y="0"/>
							</Offset>
						</Anchor>
						<Anchor point="RIGHT" relativeTo="$parent_NotButton">
							<Offset>
								<AbsDimension x="-8" y="0"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<EditBox name="$parent_ArgEdit" autoFocus="false" inherits="InputBoxTemplate">
				<Size>
					<AbsDimension x="150" y="16"/>
				</Size>
				<Anchors>
					<Anchor point="RIGHT">
						<Offset>
							<AbsDimension x="-8" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<FontString inherits="ChatFontNormal" bytes="64"/>
				<Scripts>
					<OnEscapePressed>
						self:ClearFocus();
					</OnEscapePressed>
					<OnEditFocusLost>
						self:HighlightText(0, 0);
					</OnEditFocusLost>
					<OnEditFocusGained>
						self:HighlightText();
					</OnEditFocusGained>
					<OnTextChanged>
						if self:IsShown() then
							local parent = self:GetParent();
							local text = self:GetText();
							if text == "" then text = nil end;
							parent.filter.arg = text;
							parent:UpdateView();
							parent:SetFilter();
						end
					</OnTextChanged>
				</Scripts>
			</EditBox>
			<Button name="$parent_ArgBtn" inherits="UIPanelButtonTemplate" text="btn">
				<Size>
					<AbsDimension x="158" y="22"/>
				</Size>
				<Anchors>
					<Anchor point="RIGHT">
						<Offset>
							<AbsDimension x="-8" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						self:DoClick();
					</OnClick>
				</Scripts>
			</Button>
			<Button name="$parent_NotButton" inherits="UIPanelButtonTemplate" text="Not">
				<Size>
					<AbsDimension x="40" y="22"/>
				</Size>
				<Anchors>
					<Anchor point="RIGHT" relativePoint="LEFT" relativeTo="$parent_ArgEdit">
						<Offset>
							<AbsDimension x="-8" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						local parent = self:GetParent();
						if parent.filter.isNot then
							parent.filter.isNot = nil;
						else
							parent.filter.isNot = true;
						end
						parent:UpdateView();
						parent:SetFilter();
					</OnClick>
					<OnLoad>
						self:SetScale(0.9);
					</OnLoad>
				</Scripts>
			</Button>
			<Frame name="$parent_InsertTop" inherits="FBoH_HorizontalInsertTemplate">
				<Anchors>
					<Anchor point="LEFT" relativePoint="TOPLEFT"/>
					<Anchor point="RIGHT" relativePoint="TOPRIGHT"/>
				</Anchors>
			</Frame>
			<Frame name="$parent_InsertBottom" inherits="FBoH_HorizontalInsertTemplate">
				<Anchors>
					<Anchor point="LEFT" relativePoint="BOTTOMLEFT"/>
					<Anchor point="RIGHT" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Frame>
			<Frame name="$parent_InsertGroup" inherits="FBoH_InsertGroupTemplate">
				<Anchors>
					<Anchor point="TOPLEFT"/>
					<Anchor point="BOTTOMRIGHT"/>
				</Anchors>
			</Frame>
		</Frames>
		<Scripts>
			<OnLoad>
				self.fontString = _G[self:GetName() .. "_Text"];
				self.argEdit = _G[self:GetName() .. "_ArgEdit"];
				self.argButton = _G[self:GetName() .. "_ArgBtn"];
				self.notButton = _G[self:GetName() .. "_NotButton"];
				self.insertTop = _G[self:GetName() .. "_InsertTop"];
				self.insertBottom = _G[self:GetName() .. "_InsertBottom"];
				self.insertGroup = _G[self:GetName() .. "_InsertGroup"];
				self.backgroundTexture = _G[self:GetName() .. "_Background"];
				
				self.SetFilter = FBoH_FilterButton_SetFilter;
				self.UpdateView = FBoH_FilterButton_UpdateView;
				self.DoUpdate = FBoH_FilterButton_DoUpdate;
				self.ReceiveDrag = FBoH_FilterButton_ReceiveDrag;

				self.argButton.DoClick = FBoH_FilterButtonArgBtn_DoClick;
				
				self.backgroundTexture:SetVertexColor(0.5, 0.8, 1.0, 0.6);

				self.type = "filter";
				self:RegisterForDrag("LeftButton");
			</OnLoad>
			<OnUpdate>
				self:DoUpdate();
			</OnUpdate>
			<OnDragStart>
				self.backgroundTexture:SetVertexColor(0.5, 0.8, 1.0, 0.2);
				self.isBeingDragged = true;
				FBoH_ConfigureDrag:SetText(self.fontString:GetText());
				FBoH_ConfigureDrag:Show();
				FBoH_Configure.dragData = {
					source=self;
				}
			</OnDragStart>
			<OnDragStop>
				self.backgroundTexture:SetVertexColor(0.5, 0.8, 1.0, 0.6);
				FBoH_ConfigureDrag:Hide();
				if not FBoH_Configure:ExecuteDrag() then
--					FBoH:Print("Drag was not received by a target: deleting...");
					self:GetParent():DeleteFilter(self.parentID, self.parentIndex);
				end
				self.isBeingDragged = nil;
				FBoH_Configure.dragData = nil;
			</OnDragStop>
		</Scripts>
	</Button>
	
	<Button name="FBoH_SorterButton" virtual="true" hidden="false">
		<Size>
			<AbsDimension x="150" y="32"/>
		</Size>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parent_Background" file="Interface\Buttons\UI-ListBox-Highlight2">
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="0" y="-4"/>
							</Offset>
						</Anchor>
						<Anchor point="BOTTOMRIGHT">
							<Offset>
								<AbsDimension x="0" y="4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString name="$parent_Text" inherits="GameFontNormal" justifyH="LEFT" text="Sorter Button">
					<Size>
						<AbsDimension x="0" y="24"/>
					</Size>
					<Anchors>
						<Anchor point="LEFT">
							<Offset>
								<AbsDimension x="8" y="0"/>
							</Offset>
						</Anchor>
						<Anchor point="RIGHT" relativeTo="$parent_NotButton">
							<Offset>
								<AbsDimension x="-8" y="0"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<Button name="$parent_ArgBtn" inherits="UIPanelButtonTemplate" text="Ascending">
				<Size>
					<AbsDimension x="158" y="22"/>
				</Size>
				<Anchors>
					<Anchor point="RIGHT">
						<Offset>
							<AbsDimension x="-8" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						self:DoClick();
					</OnClick>
				</Scripts>
			</Button>
			<Frame name="$parent_InsertTop" inherits="FBoH_HorizontalInsertTemplate">
				<Anchors>
					<Anchor point="LEFT" relativePoint="TOPLEFT"/>
					<Anchor point="RIGHT" relativePoint="TOPRIGHT"/>
				</Anchors>
			</Frame>
			<Frame name="$parent_InsertBottom" inherits="FBoH_HorizontalInsertTemplate">
				<Anchors>
					<Anchor point="LEFT" relativePoint="BOTTOMLEFT"/>
					<Anchor point="RIGHT" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Frame>
		</Frames>
		<Scripts>
			<OnLoad>
				self.fontString = _G[self:GetName() .. "_Text"];
				self.argButton = _G[self:GetName() .. "_ArgBtn"];
				self.insertTop = _G[self:GetName() .. "_InsertTop"];
				self.insertBottom = _G[self:GetName() .. "_InsertBottom"];
				self.backgroundTexture = _G[self:GetName() .. "_Background"];
				
				self.SetSorter = FBoH_SorterButton_SetSorter;
				self.UpdateView = FBoH_FilterButton_UpdateView;
				self.DoUpdate = FBoH_SorterButton_DoUpdate;
				self.ReceiveDrag = FBoH_SorterButton_ReceiveDrag;

				self.argButton.DoClick = FBoH_SorterButtonArgBtn_DoClick;
				
				self.backgroundTexture:SetVertexColor(0.5, 0.8, 1.0, 0.6);

				self.type = "sorter";
				self:RegisterForDrag("LeftButton");
			</OnLoad>
			<OnUpdate>
				self:DoUpdate();
			</OnUpdate>
			<OnDragStart>
				self.backgroundTexture:SetVertexColor(0.5, 0.8, 1.0, 0.2);
				self.isBeingDragged = true;
				FBoH_ConfigureDrag:SetText(self.fontString:GetText());
				FBoH_ConfigureDrag:Show();
				FBoH_Configure.dragData = {
					source=self;
				}
			</OnDragStart>
			<OnDragStop>
				self.backgroundTexture:SetVertexColor(0.5, 0.8, 1.0, 0.6);
				FBoH_ConfigureDrag:Hide();
				if not FBoH_Configure:ExecuteDrag() then
--					FBoH:Print("Drag was not received by a target: deleting...");
					self:GetParent():DeleteSorter(self.index);
				end
				self.isBeingDragged = nil;
				FBoH_Configure.dragData = nil;
			</OnDragStop>
		</Scripts>
	</Button>
	
	<Frame name="FBoH_GroupTemplate" virtual="true">
		<Size>
			<AbsDimension x="46" y="32"/>
		</Size>
		<Layers>
			<Layer level="ARTWORK">
				<Texture name="$parent_Top" file="Interface\Addons\FBagOfHolding\Images\GroupBars">
					<Size>
						<AbsDimension x="8" y="8"/>
					</Size>
					<TexCoords top="0" left="0" bottom="0.25" right="1"/>
					<Anchors>
						<Anchor point="TOPRIGHT"/>
					</Anchors>
				</Texture>
				<Texture name="$parent_Bottom" file="Interface\Addons\FBagOfHolding\Images\GroupBars">
					<Size>
						<AbsDimension x="8" y="8"/>
					</Size>
					<TexCoords top="0.25" left="0" bottom="0.5" right="1"/>
					<Anchors>
						<Anchor point="BOTTOMRIGHT"/>
					</Anchors>
				</Texture>
				<Texture name="$parent_Middle" file="Interface\Addons\FBagOfHolding\Images\GroupBars">
					<TexCoords top="0.125" left="0" bottom="0.375" right="1"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parent_Top" relativePoint="BOTTOMLEFT"/>
						<Anchor point="BOTTOMRIGHT" relativeTo="$parent_Bottom" relativePoint="TOPRIGHT"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<Button name="$parent_TypeButton" inherits="UIPanelButtonTemplate" text="And" >
				<Size>
					<AbsDimension x="40" y="22"/>
				</Size>
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="LEFT">
						<Offset>
							<AbsDimension x="0" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						local parent = self:GetParent();
						if parent.filter.name == "And" then
							parent.filter.name = "Or";
						else
							parent.filter.name = "And";
						end
						parent:UpdateView();
						parent:SetFilter();
					</OnClick>
					<OnLoad>
						self:SetScale(0.9);
					</OnLoad>
				</Scripts>
			</Button>
			<Button name="$parent_NotButton" inherits="UIPanelButtonTemplate" text="Not" >
				<Size>
					<AbsDimension x="40" y="22"/>
				</Size>
				<Anchors>
					<Anchor point="BOTTOMLEFT" relativePoint="LEFT">
						<Offset>
							<AbsDimension x="0" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						local parent = self:GetParent();
						if parent.filter.isNot then
							parent.filter.isNot = nil;
						else
							parent.filter.isNot = true;
						end
						parent:UpdateView();
						parent:SetFilter();
					</OnClick>
					<OnLoad>
						self:SetScale(0.9);
					</OnLoad>
				</Scripts>
			</Button>
		</Frames>
		<Scripts>
			<OnLoad>
				self.topTex = _G[self:GetName() .. "_Top"];
				self.bottomTex = _G[self:GetName() .. "_Bottom"];
				self.typeButton = _G[self:GetName() .. "_TypeButton"];
				self.notButton = _G[self:GetName() .. "_NotButton"];

				self.SetFilter = FBoH_GroupTemplate_SetFilter;
				self.UpdateView = FBoH_GroupTemplate_UpdateView;
				
				self.SetTopClosed = function(frame, closed)
					local top, bottom = 0, 0;
					if closed then
						top = 0;
						bottom = 0.25;
					else
						top = 0.5;
						bottom = 0.75;
					end
					
					frame.topTex:SetTexCoord(0, 1, top, bottom);
				end
				
				self.SetBottomClosed = function(frame, closed)
					local top, bottom = 0, 0;
					if closed then
						top = 0.25;
						bottom = 0.5;
					else
						top = 0.75;
						bottom = 1;
					end
					
					frame.bottomTex:SetTexCoord(0, 1, top, bottom);
				end				
			</OnLoad>
		</Scripts>
	</Frame>
	
	<ScrollFrame name="FBoH_ScrollFrameTemplate" inherits="FauxScrollFrameTemplate" virtual="true">
		<Layers>
			<Layer level="BACKGROUND">
				<Texture file="Interface\AddOns\FBagOfHolding\Images\ScrollBarTop">
					<Size>
						<AbsDimension x="27" y="131"/>
					</Size>
					<TexCoords top="0" left="0" bottom="0.51171875" right="0.875"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="TOPRIGHT">
							<Offset>
								<AbsDimension x="1" y="3"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture file="Interface\AddOns\FBagOfHolding\Images\ScrollBarBottom">
					<Size>
						<AbsDimension x="27" y="131"/>
					</Size>
					<TexCoords top="0.48828125" left="0" bottom="1" right="0.875"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT">
							<Offset>
								<AbsDimension x="1" y="-3"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
	</ScrollFrame>

	<Frame name="FBoH_ConfigureLeftWellTemplate" virtual="true">
		<Size>
			<AbsDimension x="150" y="256"/>
		</Size>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture file="Interface\AddOns\FBagOfHolding\Images\WellFrame-TopLeft">
					<Size>
						<AbsDimension x="79" y="132"/>
					</Size>
					<TexCoords top="0" left="0" bottom="0.515625" right="0.30859375"/>
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="-4" y="4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture file="Interface\AddOns\FBagOfHolding\Images\WellFrame-TopRight">
					<Size>
						<AbsDimension x="79" y="132"/>
					</Size>
					<TexCoords top="0" left="0.69140625" bottom="0.515625" right="1"/>
					<Anchors>
						<Anchor point="TOPRIGHT">
							<Offset>
								<AbsDimension x="4" y="4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture file="Interface\AddOns\FBagOfHolding\Images\WellFrame-BotLeft">
					<Size>
						<AbsDimension x="79" y="132"/>
					</Size>
					<TexCoords top="0.484375" left="0" bottom="1" right="0.30859375"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT">
							<Offset>
								<AbsDimension x="-4" y="-4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture file="Interface\AddOns\FBagOfHolding\Images\WellFrame-BotRight">
					<Size>
						<AbsDimension x="79" y="132"/>
					</Size>
					<TexCoords top="0.484375" left="0.69140625" bottom="1" right="1"/>
					<Anchors>
						<Anchor point="BOTTOMRIGHT">
							<Offset>
								<AbsDimension x="4" y="-4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<ScrollFrame name="$parent_Scroll" inherits="FBoH_ScrollFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT"/>
					<Anchor point="BOTTOMRIGHT"/>
				</Anchors>
				<Scripts>
					<OnLoad>
						ScrollFrame_OnLoad(self);
						
						self.DoVerticalScroll = FBoH_ConfigureLeftWellTemplate_DoVerticalScroll;

						self.rowHeight = 32;
					</OnLoad>
					<OnVerticalScroll>
						FBOH_SCROLL_FRAME = self;
						FauxScrollFrame_OnVerticalScroll(self, offset, self.rowHeight, FBoH_Configure_OnVerticalScroll);
						FBOH_SCROLL_FRAME = nil;
					</OnVerticalScroll>
				</Scripts>
			</ScrollFrame>
			<Button name="$parent_Button1" inherits="FBoH_PropertyButton" id="1">
				<Anchors>
					<Anchor point="TOPLEFT"/>
					<Anchor point="TOPRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button2" inherits="FBoH_PropertyButton" id="2">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button1" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button1" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button3" inherits="FBoH_PropertyButton" id="3">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button2" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button2" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button4" inherits="FBoH_PropertyButton" id="4">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button3" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button3" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button5" inherits="FBoH_PropertyButton" id="5">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button4" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button4" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button6" inherits="FBoH_PropertyButton" id="6">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button5" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button5" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button7" inherits="FBoH_PropertyButton" id="7">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button6" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button6" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button8" inherits="FBoH_PropertyButton" id="8">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button7" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button7" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
		</Frames>
		<Scripts>
			<OnLoad>
				self.SetChoices = FBoH_ConfigureLeftWellTemplate_SetChoices;

				self.scrollFrame = _G[self:GetName() .. "_Scroll"];
				
				self.choices = {};
			</OnLoad>
		</Scripts>
	</Frame>
	
	<Frame name="FBoH_ConfigureFiltersWellTemplate" virtual="true">
		<Size>
			<AbsDimension x="500" y="256"/>
		</Size>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture file="Interface\AddOns\FBagOfHolding\Images\WellFrame-TopLeft">
					<Size>
						<AbsDimension x="256" y="132"/>
					</Size>
					<TexCoords top="0" left="0" bottom="0.515625" right="1"/>
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="-4" y="4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture file="Interface\AddOns\FBagOfHolding\Images\WellFrame-TopRight">
					<Size>
						<AbsDimension x="256" y="132"/>
					</Size>
					<TexCoords top="0" left="0" bottom="0.515625" right="1"/>
					<Anchors>
						<Anchor point="TOPRIGHT">
							<Offset>
								<AbsDimension x="4" y="4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture file="Interface\AddOns\FBagOfHolding\Images\WellFrame-BotLeft">
					<Size>
						<AbsDimension x="256" y="132"/>
					</Size>
					<TexCoords top="0.484375" left="0" bottom="1" right="1"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT">
							<Offset>
								<AbsDimension x="-4" y="-4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture file="Interface\AddOns\FBagOfHolding\Images\WellFrame-BotRight">
					<Size>
						<AbsDimension x="256" y="132"/>
					</Size>
					<TexCoords top="0.484375" left="0" bottom="1" right="1"/>
					<Anchors>
						<Anchor point="BOTTOMRIGHT">
							<Offset>
								<AbsDimension x="4" y="-4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString name="$parent_DefaultOutput" inherits="GameFontNormal" text="">
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="50" y="0"/>
							</Offset>
						</Anchor>
						<Anchor point="BOTTOMRIGHT">
							<Offset>
								<AbsDimension x="-50" y="0"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>				
			</Layer>
		</Layers>
		<Frames>
			<ScrollFrame name="$parent_Scroll" inherits="FBoH_ScrollFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT"/>
					<Anchor point="BOTTOMRIGHT"/>
				</Anchors>
				<Scripts>
					<OnLoad>
						ScrollFrame_OnLoad(self);
						
						self.DoVerticalScroll = FBoH_ConfigureFiltersWellTemplate_DoVerticalScroll;

						self.rowHeight = 32;
					</OnLoad>
					<OnVerticalScroll>
						FBOH_SCROLL_FRAME = self;
						FauxScrollFrame_OnVerticalScroll(self, offset, self.rowHeight, FBoH_Configure_OnVerticalScroll);
						FBOH_SCROLL_FRAME = nil;
					</OnVerticalScroll>
				</Scripts>
			</ScrollFrame>
			<Button name="$parent_Button1" inherits="FBoH_FilterButton" id="1">
				<Anchors>
					<Anchor point="TOPLEFT">
						<Offset>
							<AbsDimension x="5" y="0"/>
						</Offset>
					</Anchor>
					<Anchor point="TOPRIGHT">
						<Offset>
							<AbsDimension x="-5" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parent_Button2" inherits="FBoH_FilterButton" id="2">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button1" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button1" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button3" inherits="FBoH_FilterButton" id="3">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button2" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button2" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button4" inherits="FBoH_FilterButton" id="4">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button3" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button3" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button5" inherits="FBoH_FilterButton" id="5">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button4" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button4" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button6" inherits="FBoH_FilterButton" id="6">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button5" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button5" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button7" inherits="FBoH_FilterButton" id="7">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button6" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button6" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button8" inherits="FBoH_FilterButton" id="8">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button7" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button7" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
		</Frames>
		<Scripts>
			<OnLoad>
				self.SetFilters = FBoH_ConfigureFiltersWellTemplate_SetFilters;
				self.GetGroupFrame = FBoH_ConfigureFiltersWellTemplate_GetGroupFrame;
				self.ReceiveDrag = FBoH_ConfigureFiltersWellTemplate_ReceiveDrag;
				self.DeleteFilter = FBoH_ConfigureFiltersWellTemplate_DeleteFilter;
				self.InsertFilter = FBoH_ConfigureFiltersWellTemplate_InsertFilter;
				self.InsertGroup = FBoH_ConfigureFiltersWellTemplate_InsertGroup;
				self.UpdateView = FBoH_ConfigureFiltersWellTemplate_UpdateView;
				
				self.scrollFrame = _G[self:GetName() .. "_Scroll"];
				self.defaultString = _G[self:GetName() .. "_DefaultOutput"];
				
				self.filterSettings = {};
				self.groupFrames = {};
			</OnLoad>
			<OnUpdate>
				local dragData = FBoH_Configure.dragData;
				if dragData and MouseIsOver(self) then
					local top = self:GetTop();
					if self.lastRowButton then
						top = self.lastRowButton:GetBottom();
					end

					local _, cursorY = GetCursorPosition();
					cursorY = cursorY / UIParent:GetEffectiveScale();
					
					if top > cursorY then
						dragData.target = self;
					end
				end
			</OnUpdate>
		</Scripts>
	</Frame>
	
	<Frame name="FBoH_ConfigureSortersWellTemplate" virtual="true">
		<Size>
			<AbsDimension x="500" y="256"/>
		</Size>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture file="Interface\AddOns\FBagOfHolding\Images\WellFrame-TopLeft">
					<Size>
						<AbsDimension x="256" y="132"/>
					</Size>
					<TexCoords top="0" left="0" bottom="0.515625" right="1"/>
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="-4" y="4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture file="Interface\AddOns\FBagOfHolding\Images\WellFrame-TopRight">
					<Size>
						<AbsDimension x="256" y="132"/>
					</Size>
					<TexCoords top="0" left="0" bottom="0.515625" right="1"/>
					<Anchors>
						<Anchor point="TOPRIGHT">
							<Offset>
								<AbsDimension x="4" y="4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture file="Interface\AddOns\FBagOfHolding\Images\WellFrame-BotLeft">
					<Size>
						<AbsDimension x="256" y="132"/>
					</Size>
					<TexCoords top="0.484375" left="0" bottom="1" right="1"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT">
							<Offset>
								<AbsDimension x="-4" y="-4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture file="Interface\AddOns\FBagOfHolding\Images\WellFrame-BotRight">
					<Size>
						<AbsDimension x="256" y="132"/>
					</Size>
					<TexCoords top="0.484375" left="0" bottom="1" right="1"/>
					<Anchors>
						<Anchor point="BOTTOMRIGHT">
							<Offset>
								<AbsDimension x="4" y="-4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString name="$parent_DefaultOutput" inherits="GameFontNormal" text="">
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="50" y="0"/>
							</Offset>
						</Anchor>
						<Anchor point="BOTTOMRIGHT">
							<Offset>
								<AbsDimension x="-50" y="0"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>				
			</Layer>
		</Layers>
		<Frames>
			<ScrollFrame name="$parent_Scroll" inherits="FBoH_ScrollFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT"/>
					<Anchor point="BOTTOMRIGHT"/>
				</Anchors>
				<Scripts>
					<OnLoad>
						ScrollFrame_OnLoad(self);
						
						self.DoVerticalScroll = FBoH_ConfigureSortersWellTemplate_DoVerticalScroll;

						self.rowHeight = 32;
					</OnLoad>
					<OnVerticalScroll>
						FBOH_SCROLL_FRAME = self;
						FauxScrollFrame_OnVerticalScroll(self, offset, self.rowHeight, FBoH_Configure_OnVerticalScroll);
						FBOH_SCROLL_FRAME = nil;
					</OnVerticalScroll>
				</Scripts>
			</ScrollFrame>
			<Button name="$parent_Button1" inherits="FBoH_SorterButton" id="1">
				<Anchors>
					<Anchor point="TOPLEFT">
						<Offset>
							<AbsDimension x="5" y="0"/>
						</Offset>
					</Anchor>
					<Anchor point="TOPRIGHT">
						<Offset>
							<AbsDimension x="-5" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parent_Button2" inherits="FBoH_SorterButton" id="2">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button1" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button1" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button3" inherits="FBoH_SorterButton" id="3">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button2" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button2" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button4" inherits="FBoH_SorterButton" id="4">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button3" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button3" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button5" inherits="FBoH_SorterButton" id="5">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button4" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button4" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button6" inherits="FBoH_SorterButton" id="6">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button5" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button5" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button7" inherits="FBoH_SorterButton" id="7">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button6" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button6" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
			<Button name="$parent_Button8" inherits="FBoH_SorterButton" id="8">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parent_Button7" relativePoint="BOTTOMLEFT"/>
					<Anchor point="TOPRIGHT" relativeTo="$parent_Button7" relativePoint="BOTTOMRIGHT"/>
				</Anchors>
			</Button>
		</Frames>
		<Scripts>
			<OnLoad>
				self.SetSorters = FBoH_ConfigureSortersWellTemplate_SetSorters;
--				self.GetGroupFrame = FBoH_ConfigureFiltersWellTemplate_GetGroupFrame;
				self.ReceiveDrag = FBoH_ConfigureSortersWellTemplate_ReceiveDrag;
				self.DeleteSorter = FBoH_ConfigureSortersWellTemplate_DeleteSorter;
--				self.InsertGroup = FBoH_ConfigureFiltersWellTemplate_InsertGroup;
				self.UpdateView = FBoH_ConfigureSortersWellTemplate_UpdateView;
				
				self.scrollFrame = _G[self:GetName() .. "_Scroll"];
				self.defaultString = _G[self:GetName() .. "_DefaultOutput"];
				
--				self.filterSettings = {};
--				self.groupFrames = {};
			</OnLoad>
			<OnUpdate>
				local dragData = FBoH_Configure.dragData;
				if dragData and MouseIsOver(self) then
					local top = self:GetTop();
					if self.lastRowButton then
						top = self.lastRowButton:GetBottom();
					end

					local _, cursorY = GetCursorPosition();
					cursorY = cursorY / UIParent:GetEffectiveScale();
					
					if top > cursorY then
						dragData.target = self;
					end
				end
			</OnUpdate>
		</Scripts>
	</Frame>
	
	<Button name="FBoH_ConfigureTabTemplate" inherits="CharacterFrameTabButtonTemplate" virtual="true">
		<Scripts>
			<OnLoad>
				self.DoClick = FBoH_ConfigureTabTemplate_DoClick;
			</OnLoad>
			<OnClick>
				self:DoClick();
			</OnClick>
		</Scripts>
	</Button>
	
	<Frame name="FBoH_ConfigureBaseTemplate" virtual="true">
		<Layers>
			<Layer level="ARTWORK">
				<FontString name="$parent_NameLabel" inherits="GameFontNormal" text="FBOH_CONFIG_NAMELABEL">
					<Anchors>
						<Anchor point="TOPLEFT"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<EditBox name="$parent_NameEdit" autoFocus="false" inherits="InputBoxTemplate">
				<Size>
					<AbsDimension x="150" y="16"/>
				</Size>
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" relativeTo="$parent_NameLabel">
						<Offset>
							<AbsDimension x="10" y="2"/>
						</Offset>
					</Anchor>
				</Anchors>
				<FontString inherits="ChatFontNormal" bytes="64"/>
				<Scripts>
					<OnEscapePressed>
						self:ClearFocus();
					</OnEscapePressed>
					<OnEditFocusLost>
						self:HighlightText(0, 0);
					</OnEditFocusLost>
					<OnTextChanged>
						if self:GetParent():GetParent().tabDef.name ~= self:GetText() then
							self:GetParent():GetParent().tabDef.name = self:GetText();
							self:GetParent():GetParent().viewModel:UpdateBag();
						end
					</OnTextChanged>
				</Scripts>
			</EditBox>
		</Frames>
		<Scripts>
			<OnLoad>
				self.Update = FBoH_ConfigureBaseTemplate_Update;
				
				self.nameEdit = _G[self:GetName() .. "_NameEdit"];
			</OnLoad>
		</Scripts>
	</Frame>
	
	<Frame name="FBoH_ConfigureMainTabTemplate" virtual="true">
		<Size>
			<AbsDimension x="0" y="256"/>
		</Size>
		<Frames>
			<Frame name="$parent_Left" inherits="FBoH_ConfigureLeftWellTemplate">
				<Anchors>
					<Anchor point="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="5" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="$parent_Right" inherits="FBoH_ConfigureFiltersWellTemplate">
				<Anchors>
					<Anchor point="BOTTOMRIGHT">
						<Offset>
							<AbsDimension x="-28" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
		</Frames>
		<Scripts>
			<OnLoad>
				self.SetChoices = function(frame, choices)
					frame.choicesList:SetChoices(choices); 
				end
				self.SetFilters = function(frame, filterDefs)
					frame.filtersList:SetFilters(filterDefs)
				end
				
				self.choicesList = _G[self:GetName() .. "_Left"];
				self.filtersList = _G[self:GetName() .. "_Right"];
			</OnLoad>
		</Scripts>
	</Frame>
	
	<Frame name="FBoH_ConfigureSortTabTemplate" virtual="true">
		<Size>
			<AbsDimension x="0" y="256"/>
		</Size>
		<Frames>
			<Frame name="$parent_Left" inherits="FBoH_ConfigureLeftWellTemplate">
				<Anchors>
					<Anchor point="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="5" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="$parent_Right" inherits="FBoH_ConfigureSortersWellTemplate">
				<Anchors>
					<Anchor point="BOTTOMRIGHT">
						<Offset>
							<AbsDimension x="-28" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
		</Frames>
		<Scripts>
			<OnLoad>
				self.SetChoices = function(frame, choices)
					frame.choicesList:SetChoices(choices); 
				end
				self.SetSorters = function(frame, sorters)
					frame.sortersList:SetSorters(sorters)
				end
				
				self.choicesList = _G[self:GetName() .. "_Left"];
				self.sortersList = _G[self:GetName() .. "_Right"];
			</OnLoad>
		</Scripts>
	</Frame>
	
	<Frame name="FBoH_Configure" hidden="true" toplevel="true" frameStrata="DIALOG" movable="true" clampedToScreen="true" enableMouse="true" parent="UIParent">
		<Size>
			<AbsDimension x="724" y="330"/>
		</Size>
		<Anchors>
			<Anchor point="CENTER"/>
			<Offset><AbsDimension x="-200" y="200"/></Offset>
		</Anchors>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parent_TopLeft" file="Interface\AddOns\FBagOfHolding\Images\ConfigFrame-TopLeft">
					<Size>
						<AbsDimension x="256" y="164"/>
					</Size>
					<TexCoords top="0" left="0" bottom="0.640625" right="1"/>
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="-2" y="-2"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture name="$parent_Top" file="Interface\AddOns\FBagOfHolding\Images\ConfigFrame-Top">
					<Size>
						<AbsDimension x="256" y="164"/>
					</Size>
					<TexCoords top="0" left="0" bottom="0.640625" right="1"/>
					<Anchors>
						<Anchor point="TOP">
							<Offset>
								<AbsDimension x="0" y="-2"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture name="$parent_TopRight" file="Interface\AddOns\FBagOfHolding\Images\ConfigFrame-TopRight">
					<Size>
						<AbsDimension x="256" y="164"/>
					</Size>
					<TexCoords top="0" left="0" bottom="0.640625" right="1"/>
					<Anchors>
						<Anchor point="TOPRIGHT">
							<Offset>
								<AbsDimension x="2" y="-2"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture name="$parent_BottomLeft" file="Interface\AddOns\FBagOfHolding\Images\ConfigFrame-BotLeft">
					<Size>
						<AbsDimension x="256" y="164"/>
					</Size>
					<TexCoords top="0.359375" left="0" bottom="1" right="1"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT">
							<Offset>
								<AbsDimension x="-2" y="2"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture name="$parent_Bottom" file="Interface\AddOns\FBagOfHolding\Images\ConfigFrame-Bot">
					<Size>
						<AbsDimension x="256" y="164"/>
					</Size>
					<TexCoords top="0.359375" left="0" bottom="1" right="1"/>
					<Anchors>
						<Anchor point="BOTTOM">
							<Offset>
								<AbsDimension x="0" y="2"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<Texture name="$parent_BottomRight" file="Interface\AddOns\FBagOfHolding\Images\ConfigFrame-BotRight">
					<Size>
						<AbsDimension x="256" y="164"/>
					</Size>
					<TexCoords top="0.359375" left="0" bottom="1" right="1"/>
					<Anchors>
						<Anchor point="BOTTOMRIGHT">
							<Offset>
								<AbsDimension x="2" y="2"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString inherits="GameFontNormal" text="FBOH_CONFIG_TITLE">
					<Anchors>
						<Anchor point="TOP">
							<Offset>
								<AbsDimension x="0" y="-7"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<Button name="$parent_CloseButton" inherits="UIPanelCloseButton">
				<Anchors>
					<Anchor point="TOPRIGHT">
						<Offset>
							<AbsDimension x="5" y="2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Button>
			
			<Frame inherits="FBoH_ConfigureBaseTemplate" name="$parent_Base">
				<Anchors>
					<Anchor point="TOPLEFT">
						<Offset>
							<AbsDimension x="8" y="-36"/>
						</Offset>
					</Anchor>
					<Anchor point="BOTTOMRIGHT"/>
				</Anchors>
			</Frame>
			<Frame name="$parent_Frame1" inherits="FBoH_ConfigureMainTabTemplate" id="1001">
				<Anchors>
					<Anchor point="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="4" y="12"/>
						</Offset>
					</Anchor>
					<Anchor point="BOTTOMRIGHT">
						<Offset>
							<AbsDimension x="-4" y="12"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>  
			<Frame name="$parent_Frame2" inherits="FBoH_ConfigureSortTabTemplate" id="1002">
				<Anchors>
					<Anchor point="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="4" y="12"/>
						</Offset>
					</Anchor>
					<Anchor point="BOTTOMRIGHT">
						<Offset>
							<AbsDimension x="-4" y="12"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			
			<Button name="$parentTab1" inherits="FBoH_ConfigureTabTemplate" id="1" text="FBOH_CONFIG_FILTERS">
				<Anchors>
					<Anchor point="CENTER" relativePoint="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="60" y="-8"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parentTab2" inherits="FBoH_ConfigureTabTemplate" id="2" text="FBOH_CONFIG_SORTING">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentTab1" relativePoint="RIGHT">
						<Offset>
							<AbsDimension x="-16" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Button>
		</Frames>
		<Scripts>
			<OnLoad>
				self.ShowTab = FBoH_Configure_ShowTab;
				self.SetModel = FBoH_Configure_SetModel;
				self.ExecuteDrag =FBoH_Configure_ExecuteDrag;

				self.baseOptions = _G[self:GetName() .. "_Base"]
				self.filtersFrame = FBoH_GetChildObjectByID(self, 1001);
				self.sortersFrame = FBoH_GetChildObjectByID(self, 1002);
				
				self.tabCount = 2;
				
				self.DoShow = FBoH_Configure_DoShow;
				
				PanelTemplates_SetNumTabs(self, self.tabCount);
				self:ShowTab(1);
				
				table.insert(UISpecialFrames, self:GetName());
			</OnLoad>
			<OnShow>
				self:DoShow();
			</OnShow>
			<OnHide>
				PlaySound("UChatScrollButton");
				if self.isMoving then
					self:StopMovingOrSizing();
					self.isMoving = false;
				end
			</OnHide>
			<OnMouseDown>
				if button == "LeftButton" then
					self:StartMoving();
					self.isMoving = true;
				end
			</OnMouseDown>
			<OnMouseUp>
				if self.isMoving then
					self:StopMovingOrSizing();
					self.isMoving = false;
				end
			</OnMouseUp>
		</Scripts>
	</Frame>
   
</Ui>
